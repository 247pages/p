<!DOCTYPE html>
<html>
<head>
  <title>Admin CCTV Viewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: sans-serif; text-align: center; }
    video { width: 100%; max-height: 480px; background: #000; }
    textarea { width: 100%; height: 120px; font-size: 12px; margin-top: 5px; }
    button { margin-top: 5px; }
  </style>
</head>
<body>
  <h3>ðŸ“º CCTV Viewer (Admin)</h3>
  <video id="remote" autoplay playsinline></video>
  <br>
  <button onclick="createOffer()">Create Offer</button>
  <div>Copy this JSON â†’ paste into GitHub offer.json:</div>
  <textarea id="offer"></textarea>
  <div>Paste Answer JSON from Telegram:</div>
  <textarea id="answer"></textarea>
  <button onclick="setAnswer()">Set Answer</button>
  <div id="status"></div>

  <script>
    let pc = new RTCPeerConnection();
    let remote = document.getElementById("remote");
    let offerBox = document.getElementById("offer");
    let answerBox = document.getElementById("answer");
    let status = document.getElementById("status");

    pc.ontrack = e => {
      remote.srcObject = e.streams[0];
      status.innerText = "âœ… Remote stream received";
    };

    pc.oniceconnectionstatechange = () => {
      status.innerText = "ICE state: " + pc.iceConnectionState;
    };

    async function createOffer() {
      let offer = await pc.createOffer();
      await pc.setLocalDescription(offer);
      offerBox.value = JSON.stringify(offer);
      status.innerText = "ðŸ“¡ Offer created, save it to GitHub.";
    }

    async function setAnswer() {
      let ans = JSON.parse(answerBox.value);
      await pc.setRemoteDescription(new RTCSessionDescription(ans));
      status.innerText = "âœ… Answer set, connection should start.";
    }
  </script>
</body>
</html>
